name: Code Quality Check
on: [push, pull_request]

jobs:
  quality-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          
      - name: Install dependencies
        run: npm install
        
      - name: Check for accents in code
        run: |
          echo "üîç Verificando acentos en c√≥digo..."
          if grep -r "[√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë]" src/ --include="*.ts" --include="*.tsx" --include="*.js" --include="*.jsx"; then
            echo "‚ùå ERROR: Se encontraron acentos en el c√≥digo"
            echo "Por favor, elimina todos los acentos de variables, funciones y identificadores"
            exit 1
          fi
          echo "‚úÖ No se encontraron acentos en el c√≥digo"
          
      - name: Run ESLint
        run: npm run lint
        
      - name: Run TypeScript check
        run: npm run type-check
        
      - name: Run spelling check
        run: |
          echo "üîç Verificando ortograf√≠a en comunicaciones..."
          node scripts/check-spelling.js
          
      - name: Run etiquette validation
        run: |
          echo "üîç Validando reglas de etiqueta..."
          node scripts/validate-etiquette.js 
