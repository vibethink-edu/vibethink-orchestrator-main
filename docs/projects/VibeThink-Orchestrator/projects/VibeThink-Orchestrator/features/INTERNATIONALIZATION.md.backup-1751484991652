# 🌍 Sistema de Internacionalización - AI Pair Orchestrator Pro਍ഀഀ
## 📋 **Resumen Ejecutivo**਍ഀഀ
El sistema de internacionalización (i18n) de AI Pair Orchestrator Pro proporciona soporte completo para múltiples idiomas y monedas, con **español y COP como defaults** para Colombia, pero con capacidad de expansión internacional inteligente.਍ഀഀ
---਍ഀഀ
## 🎯 **Características Principales**਍ഀഀ
### **1. Soporte Multiidioma**਍ⴀ ⨀⨀䔀猀瀀愀漀氀 ⠀䌀漀氀漀洀戀椀愀⤀⨀⨀ ⴀ 䤀搀椀漀洀愀 瀀爀椀渀挀椀瀀愀氀 礀 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
- **Inglés** - Idioma secundario para expansión internacional਍ⴀ ⨀⨀䐀攀琀攀挀挀椀渀 愀甀琀漀洀琀椀挀愀⨀⨀ 搀攀氀 椀搀椀漀洀愀 搀攀氀 渀愀瘀攀最愀搀漀爀ഀഀ
- **Cambio dinámico** sin recargar la página਍ഀഀ
### **2. Manejo Internacional de Monedas**਍ⴀ ⨀⨀䌀伀倀 ⠀倀攀猀漀猀 䌀漀氀漀洀戀椀愀渀漀猀⤀⨀⨀ ⴀ 䴀漀渀攀搀愀 瀀漀爀 搀攀昀攀挀琀漀 瀀愀爀愀 䌀漀氀漀洀戀椀愀ഀഀ
- **USD (Dólares Americanos)** - Para mercado internacional਍ⴀ ⨀⨀䔀唀刀 ⠀䔀甀爀漀猀⤀⨀⨀ ⴀ 倀愀爀愀 洀攀爀挀愀搀漀 攀甀爀漀瀀攀漀ഀഀ
- **Conversión automática** y **formateo localizado**਍ഀഀ
### **3. Configuración Dual**਍ⴀ ⨀⨀䌀漀渀昀椀最甀爀愀挀椀渀 䔀洀瀀爀攀猀愀爀椀愀氀⨀⨀ ⴀ 䄀搀洀椀渀椀猀琀爀愀搀愀 瀀漀爀 攀氀 愀搀洀椀渀 搀攀 氀愀 攀洀瀀爀攀猀愀ഀഀ
- **Configuración Personal** - Administrada por cada usuario਍ⴀ ⨀⨀䨀攀爀愀爀焀甀愀 挀氀愀爀愀⨀⨀ 搀攀 瀀爀攀昀攀爀攀渀挀椀愀猀ഀഀ
਍ⴀⴀⴀഀഀ
਍⌀⌀ 㴀꣘⃞⨀⨀刀䔀䜀䰀䄀匀 䌀刀촀吀䤀䌀䄀匀 䐀䔀 䤀䐀䤀伀䴀䄀匀⨀⨀ഀഀ
਍⌀⌀⌀ ⨀⨀刀攀最氀愀 倀爀椀渀挀椀瀀愀氀㨀 䔀猀瀀愀漀氀 倀爀椀洀攀爀漀⨀⨀ഀഀ
> **"TODAS las interfaces inicialmente deben estar en ESPAÑOL por defecto, con opción de cambiar a inglés."**਍ഀഀ
### **Implementación Obligatoria**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// Configuración por defecto - ESPAÑOL PRIMERO਍挀漀渀猀琀 搀攀昀愀甀氀琀䰀愀渀最甀愀最攀 㴀 ✀攀猀✀㬀ഀഀ
const fallbackLanguage = 'es';਍ഀഀ
// Detección de idioma del navegador਍挀漀渀猀琀 搀攀琀攀挀琀䰀愀渀最甀愀最攀 㴀 ⠀⤀ 㴀㸀 笀ഀഀ
  const browserLang = navigator.language.split('-')[0];਍  挀漀渀猀琀 猀甀瀀瀀漀爀琀攀搀䰀愀渀最甀愀最攀猀 㴀 嬀✀攀猀✀Ⰰ ✀攀渀✀崀㬀ഀഀ
  ਍  ⼀⼀ 匀䤀䔀䴀倀刀䔀 瀀爀椀漀爀椀稀愀爀 攀猀瀀愀漀氀ഀഀ
  if (browserLang === 'es') return 'es';਍  椀昀 ⠀戀爀漀眀猀攀爀䰀愀渀最 㴀㴀㴀 ✀攀渀✀⤀ 爀攀琀甀爀渀 ✀攀渀✀㬀ഀഀ
  ਍  ⼀⼀ 倀漀爀 搀攀昀攀挀琀漀㨀 䔀匀倀䄀턀伀䰀ഀഀ
  return 'es';਍紀㬀ഀഀ
```਍ഀഀ
### **Reglas Específicas**਍ഀഀ
#### **1. Landing Page**਍ⴀ Ԁ‧⨀⨀匀椀攀洀瀀爀攀 攀渀 攀猀瀀愀漀氀⨀⨀ 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
- ✅ **Selector de idioma** visible en header਍ⴀ Ԁ‧⨀⨀䌀漀渀琀攀渀椀搀漀 瀀爀椀渀挀椀瀀愀氀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Call-to-action** en español਍ഀഀ
#### **2. Dashboard Principal**਍ⴀ Ԁ‧⨀⨀䤀渀琀攀爀昀愀稀 挀漀洀瀀氀攀琀愀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Menús y navegación** en español਍ⴀ Ԁ‧⨀⨀䴀攀渀猀愀樀攀猀 搀攀氀 猀椀猀琀攀洀愀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Documentación** en español਍ഀഀ
#### **3. Formularios y Registro**਍ⴀ Ԁ‧⨀⨀䌀愀洀瀀漀猀 搀攀 攀渀琀爀愀搀愀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Validaciones** en español਍ⴀ Ԁ‧⨀⨀䴀攀渀猀愀樀攀猀 搀攀 攀爀爀漀爀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Confirmaciones** en español਍ഀഀ
#### **4. Sistema de Billing**਍ⴀ Ԁ‧⨀⨀倀氀愀渀攀猀 礀 瀀爀攀挀椀漀猀⨀⨀ 攀渀 攀猀瀀愀漀氀 ⠀䌀伀倀⤀ഀഀ
- ✅ **Facturas** en español਍ⴀ Ԁ‧⨀⨀匀漀瀀漀爀琀攀⨀⨀ 攀渀 攀猀瀀愀漀氀ഀഀ
- ✅ **Términos y condiciones** en español਍ഀഀ
---਍ഀഀ
## 💰 **INVESTIGACIÓN PROFUNDA: MANEJO INTERNACIONAL DE MONEDAS**਍ഀഀ
### **Análisis de Mercado Internacional**਍ഀഀ
#### **1. Patrones de Facturación Internacional**਍ഀഀ
**Estados Unidos (USD)**਍ⴀ ⨀⨀䘀漀爀洀愀琀漀⨀⨀㨀 ␀㄀Ⰰ㈀㌀㐀⸀㔀㘀ഀഀ
- **Separador decimal**: Punto (.)਍ⴀ ⨀⨀匀攀瀀愀爀愀搀漀爀 搀攀 洀椀氀攀猀⨀⨀㨀 䌀漀洀愀 ⠀Ⰰ⤀ഀഀ
- **Posición del símbolo**: Antes del número਍ⴀ ⨀⨀䔀樀攀洀瀀氀漀⨀⨀㨀 ␀㤀㤀⸀㤀㤀 唀匀䐀⼀洀漀渀琀栀ഀഀ
਍⨀⨀䔀甀爀漀瀀愀 ⠀䔀唀刀⤀⨀⨀ഀഀ
- **Formato**: 1.234,56 €਍ⴀ ⨀⨀匀攀瀀愀爀愀搀漀爀 搀攀挀椀洀愀氀⨀⨀㨀 䌀漀洀愀 ⠀Ⰰ⤀ഀഀ
- **Separador de miles**: Punto (.)਍ⴀ ⨀⨀倀漀猀椀挀椀渀 搀攀氀 猀洀戀漀氀漀⨀⨀㨀 䐀攀猀瀀甀猀 搀攀氀 渀切洀攀爀漀ഀഀ
- **Ejemplo**: 99,99 €/month਍ഀഀ
**Colombia (COP)**਍ⴀ ⨀⨀䘀漀爀洀愀琀漀⨀⨀㨀 ␀㤀㤀⸀㤀㤀㤀ഀഀ
- **Separador decimal**: Coma (,)਍ⴀ ⨀⨀匀攀瀀愀爀愀搀漀爀 搀攀 洀椀氀攀猀⨀⨀㨀 倀甀渀琀漀 ⠀⸀⤀ഀഀ
- **Posición del símbolo**: Antes del número਍ⴀ ⨀⨀䔀樀攀洀瀀氀漀⨀⨀㨀 ␀㤀㤀⸀　　　 䌀伀倀⼀洀攀猀ഀഀ
਍⌀⌀⌀⌀ ⨀⨀㈀⸀ 䔀猀琀爀愀琀攀最椀愀猀 搀攀 倀爀攀挀椀漀猀 䤀渀琀攀爀渀愀挀椀漀渀愀氀攀猀⨀⨀ഀഀ
਍⨀⨀倀爀椀挀椀渀最 䰀漀挀愀氀椀稀愀琀椀漀渀⨀⨀ഀഀ
```typescript਍⼀⼀ 䔀猀琀爀愀琀攀最椀愀 搀攀 瀀爀攀挀椀漀猀 瀀漀爀 爀攀最椀渀ഀഀ
const regionalPricing = {਍  ✀䌀伀✀㨀 笀ഀഀ
    currency: 'COP',਍    瀀爀椀挀攀猀㨀 笀ഀഀ
      starter: 99000,਍      瀀爀漀昀攀猀猀椀漀渀愀氀㨀 ㈀㤀㤀　　　Ⰰഀഀ
      enterprise: 799000਍    紀Ⰰഀഀ
    format: 'es-CO'਍  紀Ⰰഀഀ
  'US': {਍    挀甀爀爀攀渀挀礀㨀 ✀唀匀䐀✀Ⰰഀഀ
    prices: {਍      猀琀愀爀琀攀爀㨀 ㈀㤀Ⰰഀഀ
      professional: 99,਍      攀渀琀攀爀瀀爀椀猀攀㨀 ㈀㤀㤀ഀഀ
    },਍    昀漀爀洀愀琀㨀 ✀攀渀ⴀ唀匀✀ഀഀ
  },਍  ✀䔀唀✀㨀 笀ഀഀ
    currency: 'EUR',਍    瀀爀椀挀攀猀㨀 笀ഀഀ
      starter: 25,਍      瀀爀漀昀攀猀猀椀漀渀愀氀㨀 㠀㔀Ⰰഀഀ
      enterprise: 250਍    紀Ⰰഀഀ
    format: 'de-DE' // o 'fr-FR', 'es-ES' según país਍  紀ഀഀ
};਍怀怀怀ഀഀ
਍⨀⨀䌀漀渀瘀攀爀猀椀渀 搀攀 䴀漀渀攀搀愀猀⨀⨀ഀഀ
```typescript਍⼀⼀ 䄀倀䤀 搀攀 挀漀渀瘀攀爀猀椀渀 搀攀 洀漀渀攀搀愀猀ഀഀ
const exchangeRates = {਍  ✀䌀伀倀✀㨀 笀ഀഀ
    'USD': 0.00026, // 1 COP = 0.00026 USD਍    ✀䔀唀刀✀㨀 　⸀　　　㈀㐀  ⼀⼀ ㄀ 䌀伀倀 㴀 　⸀　　　㈀㐀 䔀唀刀ഀഀ
  },਍  ✀唀匀䐀✀㨀 笀ഀഀ
    'COP': 3850,    // 1 USD = 3850 COP਍    ✀䔀唀刀✀㨀 　⸀㤀㈀     ⼀⼀ ㄀ 唀匀䐀 㴀 　⸀㤀㈀ 䔀唀刀ഀഀ
  },਍  ✀䔀唀刀✀㨀 笀ഀഀ
    'COP': 4180,    // 1 EUR = 4180 COP਍    ✀唀匀䐀✀㨀 ㄀⸀　㤀     ⼀⼀ ㄀ 䔀唀刀 㴀 ㄀⸀　㤀 唀匀䐀ഀഀ
  }਍紀㬀ഀഀ
```਍ഀഀ
#### **3. Mejores Prácticas de Facturación Internacional**਍ഀഀ
**Stripe (Referencia de la Industria)**਍ⴀ ⨀⨀䴀漀渀攀搀愀 氀漀挀愀氀 瀀漀爀 搀攀昀攀挀琀漀⨀⨀ 攀渀 挀愀搀愀 爀攀最椀渀ഀഀ
- **Conversión automática** para pagos internacionales਍ⴀ ⨀⨀䴀切氀琀椀瀀氀攀猀 洀漀渀攀搀愀猀⨀⨀ 瀀漀爀 挀甀攀渀琀愀 攀洀瀀爀攀猀愀爀椀愀氀ഀഀ
- **Formateo automático** según localización਍ഀഀ
**Shopify (E-commerce)**਍ⴀ ⨀⨀倀爀攀挀椀漀猀 攀渀 洀漀渀攀搀愀 氀漀挀愀氀⨀⨀ 瀀愀爀愀 挀愀搀愀 洀攀爀挀愀搀漀ഀഀ
- **Conversión en tiempo real** para turistas਍ⴀ ⨀⨀䌀漀渀昀椀最甀爀愀挀椀渀 瀀漀爀 琀椀攀渀搀愀⨀⨀ 礀 爀攀最椀渀ഀഀ
- **Soporte para múltiples monedas** simultáneas਍ഀഀ
**Netflix (SaaS)**਍ⴀ ⨀⨀倀爀攀挀椀漀猀 氀漀挀愀氀椀稀愀搀漀猀⨀⨀ 瀀漀爀 瀀愀猀ഀഀ
- **Facturación en moneda local** cuando es posible਍ⴀ ⨀⨀䌀漀渀瘀攀爀猀椀渀 愀甀琀漀洀琀椀挀愀⨀⨀ 瀀愀爀愀 瀀愀最漀猀 椀渀琀攀爀渀愀挀椀漀渀愀氀攀猀ഀഀ
- **Transparencia** en precios y conversiones਍ഀഀ
---਍ഀഀ
## 🏢 **CONFIGURACIÓN DUAL: EMPRESA Y USUARIO**਍ഀഀ
### **1. Configuración Empresarial (Admin)**਍ഀഀ
#### **Parámetros de Empresa**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
interface CompanySettings {਍  ⼀⼀ 䤀搀攀渀琀椀搀愀搀 搀攀 氀愀 攀洀瀀爀攀猀愀ഀഀ
  id: string;਍  渀愀洀攀㨀 猀琀爀椀渀最㬀ഀഀ
  logo?: string;਍  猀氀漀最愀渀㼀㨀 猀琀爀椀渀最㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 爀攀最椀漀渀愀氀ഀഀ
  country: string;਍  搀攀昀愀甀氀琀䰀愀渀最甀愀最攀㨀 ✀攀猀✀ 簀 ✀攀渀✀㬀ഀഀ
  defaultCurrency: 'COP' | 'USD' | 'EUR';਍  ഀഀ
  // Configuración de facturación਍  戀椀氀氀椀渀最匀攀琀琀椀渀最猀㨀 笀ഀഀ
    currency: 'COP' | 'USD' | 'EUR';਍    琀愀砀刀愀琀攀㨀 渀甀洀戀攀爀㬀ഀഀ
    taxId?: string;਍    椀渀瘀漀椀挀攀倀爀攀昀椀砀㨀 猀琀爀椀渀最㬀ഀഀ
    paymentTerms: number; // días਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 洀愀爀挀愀ഀഀ
  brandSettings: {਍    瀀爀椀洀愀爀礀䌀漀氀漀爀㨀 猀琀爀椀渀最㬀ഀഀ
    secondaryColor: string;਍    昀漀渀琀䘀愀洀椀氀礀㨀 猀琀爀椀渀最㬀ഀഀ
    customCSS?: string;਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 猀漀瀀漀爀琀攀ഀഀ
  supportSettings: {਍    攀洀愀椀氀㨀 猀琀爀椀渀最㬀ഀഀ
    phone?: string;਍    琀椀洀攀稀漀渀攀㨀 猀琀爀椀渀最㬀ഀഀ
    businessHours: {਍      猀琀愀爀琀㨀 猀琀爀椀渀最㬀ഀഀ
      end: string;਍      搀愀礀猀㨀 猀琀爀椀渀最嬀崀㬀ഀഀ
    };਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 甀猀甀愀爀椀漀猀ഀഀ
  userSettings: {਍    愀氀氀漀眀倀攀爀猀漀渀愀氀吀栀攀洀攀猀㨀 戀漀漀氀攀愀渀㬀ഀഀ
    allowPersonalAvatars: boolean;਍    搀攀昀愀甀氀琀唀猀攀爀刀漀氀攀㨀 唀猀攀爀刀漀氀攀㬀ഀഀ
    maxUsers: number;਍  紀㬀ഀഀ
}਍怀怀怀ഀഀ
਍⌀⌀⌀⌀ ⨀⨀䄀搀洀椀渀椀猀琀爀愀挀椀渀 搀攀 䌀漀氀愀戀漀爀愀搀漀爀攀猀⨀⨀ഀഀ
```typescript਍椀渀琀攀爀昀愀挀攀 䌀漀洀瀀愀渀礀唀猀攀爀 笀ഀഀ
  id: string;਍  挀漀洀瀀愀渀礀䤀搀㨀 猀琀爀椀渀最㬀ഀഀ
  ਍  ⼀⼀ 䤀渀昀漀爀洀愀挀椀渀 瀀攀爀猀漀渀愀氀ഀഀ
  firstName: string;਍  氀愀猀琀一愀洀攀㨀 猀琀爀椀渀最㬀ഀഀ
  email: string;਍  愀瘀愀琀愀爀㼀㨀 猀琀爀椀渀最㬀ഀഀ
  nickname?: string;਍  ഀഀ
  // Configuración de rol਍  爀漀氀攀㨀 唀猀攀爀刀漀氀攀㬀ഀഀ
  department: Department;਍  瀀攀爀洀椀猀猀椀漀渀猀㨀 倀攀爀洀椀猀猀椀漀渀嬀崀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 瀀攀爀猀漀渀愀氀 ⠀猀漀戀爀攀猀挀爀椀戀攀 攀洀瀀爀攀猀愀⤀ഀഀ
  personalSettings: {਍    氀愀渀最甀愀最攀㨀 ✀攀猀✀ 簀 ✀攀渀✀㬀ഀഀ
    currency: 'COP' | 'USD' | 'EUR';਍    琀栀攀洀攀㨀 ✀氀椀最栀琀✀ 簀 ✀搀愀爀欀✀ 簀 ✀愀甀琀漀✀㬀ഀഀ
    timezone: string;਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䔀猀琀愀搀漀 礀 愀挀挀攀猀漀ഀഀ
  status: 'active' | 'inactive' | 'suspended';਍  氀愀猀琀䰀漀最椀渀㨀 䐀愀琀攀㬀ഀഀ
  createdAt: Date;਍  甀瀀搀愀琀攀搀䄀琀㨀 䐀愀琀攀㬀ഀഀ
}਍怀怀怀ഀഀ
਍⌀⌀⌀ ⨀⨀㈀⸀ 䌀漀渀昀椀最甀爀愀挀椀渀 倀攀爀猀漀渀愀氀 ⠀唀猀甀愀爀椀漀⤀⨀⨀ഀഀ
਍⌀⌀⌀⌀ ⨀⨀倀爀攀昀攀爀攀渀挀椀愀猀 搀攀氀 唀猀甀愀爀椀漀⨀⨀ഀഀ
```typescript਍椀渀琀攀爀昀愀挀攀 唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀 笀ഀഀ
  userId: string;਍  挀漀洀瀀愀渀礀䤀搀㨀 猀琀爀椀渀最㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 椀搀椀漀洀愀 礀 爀攀最椀渀ഀഀ
  language: 'es' | 'en';਍  挀甀爀爀攀渀挀礀㨀 ✀䌀伀倀✀ 簀 ✀唀匀䐀✀ 簀 ✀䔀唀刀✀㬀ഀഀ
  timezone: string;਍  搀愀琀攀䘀漀爀洀愀琀㨀 ✀䐀䐀⼀䴀䴀⼀夀夀夀夀✀ 簀 ✀䴀䴀⼀䐀䐀⼀夀夀夀夀✀ 簀 ✀夀夀夀夀ⴀ䴀䴀ⴀ䐀䐀✀㬀ഀഀ
  timeFormat: '12h' | '24h';਍  ഀഀ
  // Configuración de tema਍  琀栀攀洀攀㨀 笀ഀഀ
    mode: 'light' | 'dark' | 'auto';਍    瀀爀椀洀愀爀礀䌀漀氀漀爀㨀 猀琀爀椀渀最㬀ഀഀ
    accentColor: string;਍    昀漀渀琀匀椀稀攀㨀 ✀猀洀愀氀氀✀ 簀 ✀洀攀搀椀甀洀✀ 簀 ✀氀愀爀最攀✀㬀ഀഀ
    compactMode: boolean;਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 渀漀琀椀昀椀挀愀挀椀漀渀攀猀ഀഀ
  notifications: {਍    攀洀愀椀氀㨀 戀漀漀氀攀愀渀㬀ഀഀ
    push: boolean;਍    猀洀猀㨀 戀漀漀氀攀愀渀㬀ഀഀ
    frequency: 'immediate' | 'daily' | 'weekly';਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 瀀爀椀瘀愀挀椀搀愀搀ഀഀ
  privacy: {਍    瀀爀漀昀椀氀攀嘀椀猀椀戀椀氀椀琀礀㨀 ✀瀀甀戀氀椀挀✀ 簀 ✀挀漀洀瀀愀渀礀✀ 簀 ✀瀀爀椀瘀愀琀攀✀㬀ഀഀ
    activitySharing: boolean;਍    搀愀琀愀䄀渀愀氀礀琀椀挀猀㨀 戀漀漀氀攀愀渀㬀ഀഀ
  };਍  ഀഀ
  // Configuración de accesibilidad਍  愀挀挀攀猀猀椀戀椀氀椀琀礀㨀 笀ഀഀ
    highContrast: boolean;਍    猀挀爀攀攀渀刀攀愀搀攀爀㨀 戀漀漀氀攀愀渀㬀ഀഀ
    keyboardNavigation: boolean;਍    爀攀搀甀挀攀搀䴀漀琀椀漀渀㨀 戀漀漀氀攀愀渀㬀ഀഀ
  };਍紀ഀഀ
```਍ഀഀ
---਍ഀഀ
## 🎨 **SISTEMA DE TEMAS DUAL**਍ഀഀ
### **1. Temas Empresariales (Admin)**਍ഀഀ
#### **Configuración de Marca**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
interface CompanyTheme {਍  挀漀洀瀀愀渀礀䤀搀㨀 猀琀爀椀渀最㬀ഀഀ
  ਍  ⼀⼀ 䌀漀氀漀爀攀猀 挀漀爀瀀漀爀愀琀椀瘀漀猀ഀഀ
  colors: {਍    瀀爀椀洀愀爀礀㨀 猀琀爀椀渀最㬀      ⼀⼀ 䌀漀氀漀爀 瀀爀椀渀挀椀瀀愀氀 搀攀 氀愀 洀愀爀挀愀ഀഀ
    secondary: string;    // Color secundario਍    愀挀挀攀渀琀㨀 猀琀爀椀渀最㬀       ⼀⼀ 䌀漀氀漀爀 搀攀 愀挀攀渀琀漀ഀഀ
    success: string;      // Verde para éxito਍    眀愀爀渀椀渀最㨀 猀琀爀椀渀最㬀      ⼀⼀ 䄀洀愀爀椀氀氀漀 瀀愀爀愀 愀搀瘀攀爀琀攀渀挀椀愀猀ഀഀ
    error: string;        // Rojo para errores਍    椀渀昀漀㨀 猀琀爀椀渀最㬀         ⼀⼀ 䄀稀甀氀 瀀愀爀愀 椀渀昀漀爀洀愀挀椀渀ഀഀ
  };਍  ഀഀ
  // Tipografía਍  琀礀瀀漀最爀愀瀀栀礀㨀 笀ഀഀ
    fontFamily: string;   // Fuente principal਍    昀漀渀琀匀椀稀攀㨀 笀ഀഀ
      small: string;਍      戀愀猀攀㨀 猀琀爀椀渀最㬀ഀഀ
      large: string;਍      砀氀愀爀最攀㨀 猀琀爀椀渀最㬀ഀഀ
    };਍    昀漀渀琀圀攀椀最栀琀㨀 笀ഀഀ
      normal: number;਍      洀攀搀椀甀洀㨀 渀甀洀戀攀爀㬀ഀഀ
      semibold: number;਍      戀漀氀搀㨀 渀甀洀戀攀爀㬀ഀഀ
    };਍  紀㬀ഀഀ
  ਍  ⼀⼀ 䔀猀瀀愀挀椀愀搀漀 礀 氀愀礀漀甀琀ഀഀ
  spacing: {਍    砀猀㨀 猀琀爀椀渀最㬀ഀഀ
    sm: string;਍    洀搀㨀 猀琀爀椀渀最㬀ഀഀ
    lg: string;਍    砀氀㨀 猀琀爀椀渀最㬀ഀഀ
  };਍  ഀഀ
  // Componentes personalizados਍  挀漀洀瀀漀渀攀渀琀猀㨀 笀ഀഀ
    buttonRadius: string;਍    挀愀爀搀刀愀搀椀甀猀㨀 猀琀爀椀渀最㬀ഀഀ
    shadow: string;਍    戀漀爀搀攀爀㨀 猀琀爀椀渀最㬀ഀഀ
  };਍  ഀഀ
  // Logo y branding਍  戀爀愀渀搀椀渀最㨀 笀ഀഀ
    logo: string;਍    氀漀最漀䐀愀爀欀㼀㨀 猀琀爀椀渀最㬀ഀഀ
    favicon: string;਍    猀氀漀最愀渀㼀㨀 猀琀爀椀渀最㬀ഀഀ
  };਍紀ഀഀ
```਍ഀഀ
### **2. Temas Personales (Usuario)**਍ഀഀ
#### **Preferencias de Tema**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
interface PersonalTheme {਍  甀猀攀爀䤀搀㨀 猀琀爀椀渀最㬀ഀഀ
  ਍  ⼀⼀ 䴀漀搀漀 搀攀 琀攀洀愀ഀഀ
  mode: 'light' | 'dark' | 'auto';਍  ഀഀ
  // Colores personalizados (sobrescriben empresa)਍  挀漀氀漀爀猀㨀 笀ഀഀ
    primary?: string;਍    猀攀挀漀渀搀愀爀礀㼀㨀 猀琀爀椀渀最㬀ഀഀ
    accent?: string;਍    戀愀挀欀最爀漀甀渀搀㼀㨀 猀琀爀椀渀最㬀ഀഀ
    surface?: string;਍    琀攀砀琀㼀㨀 猀琀爀椀渀最㬀ഀഀ
  };਍  ഀഀ
  // Configuración de interfaz਍  椀渀琀攀爀昀愀挀攀㨀 笀ഀഀ
    fontSize: 'small' | 'medium' | 'large';਍    挀漀洀瀀愀挀琀䴀漀搀攀㨀 戀漀漀氀攀愀渀㬀ഀഀ
    sidebarCollapsed: boolean;਍    猀栀漀眀䄀渀椀洀愀琀椀漀渀猀㨀 戀漀漀氀攀愀渀㬀ഀഀ
  };਍  ഀഀ
  // Avatar y perfil਍  瀀爀漀昀椀氀攀㨀 笀ഀഀ
    avatar: string;਍    渀椀挀欀渀愀洀攀㨀 猀琀爀椀渀最㬀ഀഀ
    displayName: string;਍  紀㬀ഀഀ
}਍怀怀怀ഀഀ
਍ⴀⴀⴀഀഀ
਍⌀⌀ 㰀ퟘ࿟⃾⨀⨀䄀爀焀甀椀琀攀挀琀甀爀愀 搀攀氀 匀椀猀琀攀洀愀⨀⨀ഀഀ
਍⌀⌀⌀ ⨀⨀㄀⸀ 䌀漀渀昀椀最甀爀愀挀椀渀 倀爀椀渀挀椀瀀愀氀⨀⨀ഀഀ
```typescript਍⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 椀㄀㠀渀 ⴀ 䔀匀倀䄀턀伀䰀 倀刀䤀䴀䔀刀伀ഀഀ
import i18n from 'i18next';਍椀洀瀀漀爀琀 笀 椀渀椀琀刀攀愀挀琀䤀㄀㠀渀攀砀琀 紀 昀爀漀洀 ✀爀攀愀挀琀ⴀ椀㄀㠀渀攀砀琀✀㬀ഀഀ
import LanguageDetector from 'i18next-browser-languagedetector';਍ഀഀ
const resources = {਍  攀猀㨀 笀ഀഀ
    translation: {਍      ⼀⼀ 吀爀愀搀甀挀挀椀漀渀攀猀 攀渀 攀猀瀀愀漀氀 ⴀ 䌀伀䴀倀䰀䔀吀䄀匀ഀഀ
      common: {਍        猀愀瘀攀㨀 ✀䜀甀愀爀搀愀爀✀Ⰰഀഀ
        cancel: 'Cancelar',਍        氀漀愀搀椀渀最㨀 ✀䌀愀爀最愀渀搀漀⸀⸀⸀✀Ⰰഀഀ
        error: 'Error',਍        猀甀挀挀攀猀猀㨀 ✀준砀椀琀漀✀ഀഀ
      },਍      戀椀氀氀椀渀最㨀 笀ഀഀ
        plans: 'Planes',਍        猀甀戀猀挀爀椀瀀琀椀漀渀㨀 ✀匀甀猀挀爀椀瀀挀椀渀✀Ⰰഀഀ
        payment: 'Pago',਍        椀渀瘀漀椀挀攀㨀 ✀䘀愀挀琀甀爀愀✀ഀഀ
      }਍    紀ഀഀ
  },਍  攀渀㨀 笀ഀഀ
    translation: {਍      ⼀⼀ 吀爀愀搀甀挀挀椀漀渀攀猀 攀渀 椀渀最氀猀 ⴀ 䌀伀䴀倀䰀䔀吀䄀匀ഀഀ
      common: {਍        猀愀瘀攀㨀 ✀匀愀瘀攀✀Ⰰഀഀ
        cancel: 'Cancel',਍        氀漀愀搀椀渀最㨀 ✀䰀漀愀搀椀渀最⸀⸀⸀✀Ⰰഀഀ
        error: 'Error',਍        猀甀挀挀攀猀猀㨀 ✀匀甀挀挀攀猀猀✀ഀഀ
      },਍      戀椀氀氀椀渀最㨀 笀ഀഀ
        plans: 'Plans',਍        猀甀戀猀挀爀椀瀀琀椀漀渀㨀 ✀匀甀戀猀挀爀椀瀀琀椀漀渀✀Ⰰഀഀ
        payment: 'Payment',਍        椀渀瘀漀椀挀攀㨀 ✀䤀渀瘀漀椀挀攀✀ഀഀ
      }਍    紀ഀഀ
  }਍紀㬀ഀഀ
਍椀㄀㠀渀ഀഀ
  .use(LanguageDetector)਍  ⸀甀猀攀⠀椀渀椀琀刀攀愀挀琀䤀㄀㠀渀攀砀琀⤀ഀഀ
  .init({਍    爀攀猀漀甀爀挀攀猀Ⰰഀഀ
    fallbackLng: 'es', // ESPAÑOL como fallback਍    氀渀最㨀 ✀攀猀✀Ⰰ ⼀⼀ 䔀匀倀䄀턀伀䰀 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
    debug: process.env.NODE_ENV === 'development',਍    ഀഀ
    interpolation: {਍      攀猀挀愀瀀攀嘀愀氀甀攀㨀 昀愀氀猀攀 ⼀⼀ 刀攀愀挀琀 礀愀 攀猀挀愀瀀愀 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
    },਍    ഀഀ
    detection: {਍      漀爀搀攀爀㨀 嬀✀氀漀挀愀氀匀琀漀爀愀最攀✀Ⰰ ✀渀愀瘀椀最愀琀漀爀✀Ⰰ ✀栀琀洀氀吀愀最✀崀Ⰰഀഀ
      caches: ['localStorage'],਍      ⼀⼀ 倀爀椀漀爀椀稀愀爀 攀猀瀀愀漀氀 攀渀 氀愀 搀攀琀攀挀挀椀渀ഀഀ
      lookupLocalStorage: 'i18nextLng',਍      氀漀漀欀甀瀀儀甀攀爀礀猀琀爀椀渀最㨀 ✀氀渀最✀Ⰰഀഀ
      lookupCookie: 'i18next',਍      氀漀漀欀甀瀀匀攀猀猀椀漀渀匀琀漀爀愀最攀㨀 ✀椀㄀㠀渀攀砀琀䰀渀最✀Ⰰഀഀ
      lookupFromPathIndex: 0,਍      氀漀漀欀甀瀀䘀爀漀洀匀甀戀搀漀洀愀椀渀䤀渀搀攀砀㨀 　Ⰰഀഀ
      ਍      ⼀⼀ 䌀漀渀昀椀最甀爀愀挀椀渀 攀猀瀀攀挀昀椀挀愀 瀀愀爀愀 攀猀瀀愀漀氀ഀഀ
      checkWhitelist: true,਍      眀栀椀琀攀氀椀猀琀㨀 嬀✀攀猀✀Ⰰ ✀攀渀✀崀Ⰰഀഀ
      fallbackLng: 'es'਍    紀ഀഀ
  });਍ഀഀ
export default i18n;਍怀怀怀ഀഀ
਍⌀⌀⌀ ⨀⨀㈀⸀ 䠀漀漀欀 倀爀椀渀挀椀瀀愀氀⨀⨀ഀഀ
```typescript਍⼀⼀ 䠀漀漀欀 瀀愀爀愀 最攀猀琀椀渀 搀攀 椀搀椀漀洀愀猀 ⴀ 䔀匀倀䄀턀伀䰀 倀刀䤀䴀䔀刀伀ഀഀ
export const useLanguage = () => {਍  挀漀渀猀琀 笀 琀Ⰰ 椀㄀㠀渀 紀 㴀 甀猀攀吀爀愀渀猀氀愀琀椀漀渀⠀⤀㬀ഀഀ
  const [currentLanguage, setCurrentLanguage] = useState('es'); // ESPAÑOL por defecto਍ഀഀ
  // Cambiar idioma਍  挀漀渀猀琀 挀栀愀渀最攀䰀愀渀最甀愀最攀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀愀猀礀渀挀 ⠀氀愀渀最甀愀最攀㨀 猀琀爀椀渀最⤀ 㴀㸀 笀ഀഀ
    try {਍      愀眀愀椀琀 椀㄀㠀渀⸀挀栀愀渀最攀䰀愀渀最甀愀最攀⠀氀愀渀最甀愀最攀⤀㬀ഀഀ
      setCurrentLanguage(language);਍      氀漀挀愀氀匀琀漀爀愀最攀⸀猀攀琀䤀琀攀洀⠀✀椀㄀㠀渀攀砀琀䰀渀最✀Ⰰ 氀愀渀最甀愀最攀⤀㬀ഀഀ
    } catch (error) {਍      挀漀渀猀漀氀攀⸀攀爀爀漀爀⠀✀䔀爀爀漀爀 挀愀洀戀椀愀渀搀漀 椀搀椀漀洀愀㨀✀Ⰰ 攀爀爀漀爀⤀㬀ഀഀ
      // En caso de error, mantener español਍      愀眀愀椀琀 椀㄀㠀渀⸀挀栀愀渀最攀䰀愀渀最甀愀最攀⠀✀攀猀✀⤀㬀ഀഀ
      setCurrentLanguage('es');਍    紀ഀഀ
  }, [i18n]);਍ഀഀ
  // Detectar idioma preferido - ESPAÑOL PRIMERO਍  挀漀渀猀琀 搀攀琀攀挀琀倀爀攀昀攀爀爀攀搀䰀愀渀最甀愀最攀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀⠀⤀ 㴀㸀 笀ഀഀ
    const browserLang = navigator.language.split('-')[0];਍    挀漀渀猀琀 猀甀瀀瀀漀爀琀攀搀䰀愀渀最甀愀最攀猀 㴀 嬀✀攀猀✀Ⰰ ✀攀渀✀崀㬀ഀഀ
    ਍    ⼀⼀ 匀䤀䔀䴀倀刀䔀 瀀爀椀漀爀椀稀愀爀 攀猀瀀愀漀氀ഀഀ
    if (browserLang === 'es') return 'es';਍    椀昀 ⠀猀甀瀀瀀漀爀琀攀搀䰀愀渀最甀愀最攀猀⸀椀渀挀氀甀搀攀猀⠀戀爀漀眀猀攀爀䰀愀渀最⤀⤀ 笀ഀഀ
      return browserLang;਍    紀ഀഀ
    ਍    爀攀琀甀爀渀 ✀攀猀✀㬀 ⼀⼀ 䔀猀瀀愀漀氀 瀀漀爀 搀攀昀攀挀琀漀 匀䤀䔀䴀倀刀䔀ഀഀ
  }, []);਍ഀഀ
  // Formatear moneda - COP por defecto਍  挀漀渀猀琀 昀漀爀洀愀琀䌀甀爀爀攀渀挀礀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀⠀愀洀漀甀渀琀㨀 渀甀洀戀攀爀Ⰰ 挀甀爀爀攀渀挀礀㨀 猀琀爀椀渀最 㴀 ✀䌀伀倀✀⤀ 㴀㸀 笀ഀഀ
    const formatter = new Intl.NumberFormat(currentLanguage, {਍      猀琀礀氀攀㨀 ✀挀甀爀爀攀渀挀礀✀Ⰰഀഀ
      currency,਍      洀椀渀椀洀甀洀䘀爀愀挀琀椀漀渀䐀椀最椀琀猀㨀 　Ⰰഀഀ
      maximumFractionDigits: 2਍    紀⤀㬀ഀഀ
    ਍    爀攀琀甀爀渀 昀漀爀洀愀琀琀攀爀⸀昀漀爀洀愀琀⠀愀洀漀甀渀琀⤀㬀ഀഀ
  }, [currentLanguage]);਍ഀഀ
  // Formatear fecha - Formato español por defecto਍  挀漀渀猀琀 昀漀爀洀愀琀䐀愀琀攀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀⠀搀愀琀攀㨀 䐀愀琀攀Ⰰ 漀瀀琀椀漀渀猀㼀㨀 䤀渀琀氀⸀䐀愀琀攀吀椀洀攀䘀漀爀洀愀琀伀瀀琀椀漀渀猀⤀ 㴀㸀 笀ഀഀ
    const defaultOptions: Intl.DateTimeFormatOptions = {਍      礀攀愀爀㨀 ✀渀甀洀攀爀椀挀✀Ⰰഀഀ
      month: 'long',਍      搀愀礀㨀 ✀渀甀洀攀爀椀挀✀ഀഀ
    };਍    ഀഀ
    const formatter = new Intl.DateTimeFormat(currentLanguage, {਍      ⸀⸀⸀搀攀昀愀甀氀琀伀瀀琀椀漀渀猀Ⰰഀഀ
      ...options਍    紀⤀㬀ഀഀ
    ਍    爀攀琀甀爀渀 昀漀爀洀愀琀琀攀爀⸀昀漀爀洀愀琀⠀搀愀琀攀⤀㬀ഀഀ
  }, [currentLanguage]);਍ഀഀ
  return {਍    琀Ⰰഀഀ
    currentLanguage,਍    挀栀愀渀最攀䰀愀渀最甀愀最攀Ⰰഀഀ
    detectPreferredLanguage,਍    昀漀爀洀愀琀䌀甀爀爀攀渀挀礀Ⰰഀഀ
    formatDate,਍    椀猀刀吀䰀㨀 昀愀氀猀攀 ⼀⼀ 匀椀攀洀瀀爀攀 䰀吀刀 瀀愀爀愀 攀猀瀀愀漀氀 攀 椀渀最氀猀ഀഀ
  };਍紀㬀ഀഀ
```਍ഀഀ
### **3. Hook de Configuración Dual**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// Hook para configuración empresa/usuario਍攀砀瀀漀爀琀 挀漀渀猀琀 甀猀攀䐀甀愀氀䌀漀渀昀椀最甀爀愀琀椀漀渀 㴀 ⠀⤀ 㴀㸀 笀ഀഀ
  const { user, company } = useAuth();਍  挀漀渀猀琀 嬀挀漀洀瀀愀渀礀匀攀琀琀椀渀最猀Ⰰ 猀攀琀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀崀 㴀 甀猀攀匀琀愀琀攀㰀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀 簀 渀甀氀氀㸀⠀渀甀氀氀⤀㬀ഀഀ
  const [userPreferences, setUserPreferences] = useState<UserPreferences | null>(null);਍ഀഀ
  // Cargar configuración de empresa਍  挀漀渀猀琀 氀漀愀搀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀愀猀礀渀挀 ⠀⤀ 㴀㸀 笀ഀഀ
    if (company?.id) {਍      挀漀渀猀琀 猀攀琀琀椀渀最猀 㴀 愀眀愀椀琀 昀攀琀挀栀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⠀挀漀洀瀀愀渀礀⸀椀搀⤀㬀ഀഀ
      setCompanySettings(settings);਍    紀ഀഀ
  }, [company?.id]);਍ഀഀ
  // Cargar preferencias del usuario਍  挀漀渀猀琀 氀漀愀搀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀愀猀礀渀挀 ⠀⤀ 㴀㸀 笀ഀഀ
    if (user?.id) {਍      挀漀渀猀琀 瀀爀攀昀攀爀攀渀挀攀猀 㴀 愀眀愀椀琀 昀攀琀挀栀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀⠀甀猀攀爀⸀椀搀⤀㬀ഀഀ
      setUserPreferences(preferences);਍    紀ഀഀ
  }, [user?.id]);਍ഀഀ
  // Obtener configuración efectiva (usuario sobrescribe empresa)਍  挀漀渀猀琀 最攀琀䔀昀昀攀挀琀椀瘀攀䌀漀渀昀椀最甀爀愀琀椀漀渀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀⠀⤀ 㴀㸀 笀ഀഀ
    if (!companySettings) return null;਍ഀഀ
    return {਍      氀愀渀最甀愀最攀㨀 甀猀攀爀倀爀攀昀攀爀攀渀挀攀猀㼀⸀氀愀渀最甀愀最攀 簀簀 挀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⸀搀攀昀愀甀氀琀䰀愀渀最甀愀最攀Ⰰഀഀ
      currency: userPreferences?.currency || companySettings.defaultCurrency,਍      琀栀攀洀攀㨀 甀猀攀爀倀爀攀昀攀爀攀渀挀攀猀㼀⸀琀栀攀洀攀 簀簀 挀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⸀戀爀愀渀搀匀攀琀琀椀渀最猀Ⰰഀഀ
      timezone: userPreferences?.timezone || companySettings.supportSettings.timezone਍    紀㬀ഀഀ
  }, [companySettings, userPreferences]);਍ഀഀ
  // Actualizar configuración de empresa (solo admin)਍  挀漀渀猀琀 甀瀀搀愀琀攀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀愀猀礀渀挀 ⠀猀攀琀琀椀渀最猀㨀 倀愀爀琀椀愀氀㰀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀㸀⤀ 㴀㸀 笀ഀഀ
    if (user?.role !== 'ADMIN') {਍      琀栀爀漀眀 渀攀眀 䔀爀爀漀爀⠀✀匀漀氀漀 愀搀洀椀渀椀猀琀爀愀搀漀爀攀猀 瀀甀攀搀攀渀 挀愀洀戀椀愀爀 挀漀渀昀椀最甀爀愀挀椀渀 搀攀 攀洀瀀爀攀猀愀✀⤀㬀ഀഀ
    }਍ഀഀ
    const updated = await updateCompanySettingsAPI(company?.id!, settings);਍    猀攀琀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⠀甀瀀搀愀琀攀搀⤀㬀ഀഀ
  }, [user?.role, company?.id]);਍ഀഀ
  // Actualizar preferencias personales਍  挀漀渀猀琀 甀瀀搀愀琀攀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀 㴀 甀猀攀䌀愀氀氀戀愀挀欀⠀愀猀礀渀挀 ⠀瀀爀攀昀攀爀攀渀挀攀猀㨀 倀愀爀琀椀愀氀㰀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀㸀⤀ 㴀㸀 笀ഀഀ
    const updated = await updateUserPreferencesAPI(user?.id!, preferences);਍    猀攀琀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀⠀甀瀀搀愀琀攀搀⤀㬀ഀഀ
  }, [user?.id]);਍ഀഀ
  return {਍    挀漀洀瀀愀渀礀匀攀琀琀椀渀最猀Ⰰഀഀ
    userPreferences,਍    攀昀昀攀挀琀椀瘀攀䌀漀渀昀椀最甀爀愀琀椀漀渀㨀 最攀琀䔀昀昀攀挀琀椀瘀攀䌀漀渀昀椀最甀爀愀琀椀漀渀⠀⤀Ⰰഀഀ
    loadCompanySettings,਍    氀漀愀搀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀Ⰰഀഀ
    updateCompanySettings,਍    甀瀀搀愀琀攀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀ഀഀ
  };਍紀㬀ഀഀ
```਍ഀഀ
---਍ഀഀ
## 🎨 **Componentes de UI**਍ഀഀ
### **1. Selector de Idioma**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// Componente para cambiar idioma - ESPAÑOL PRIMERO਍攀砀瀀漀爀琀 挀漀渀猀琀 䰀愀渀最甀愀最攀匀攀氀攀挀琀漀爀㨀 刀攀愀挀琀⸀䘀䌀㰀䰀愀渀最甀愀最攀匀攀氀攀挀琀漀爀倀爀漀瀀猀㸀 㴀 ⠀笀ഀഀ
  className,਍  猀栀漀眀䘀氀愀最 㴀 琀爀甀攀Ⰰഀഀ
  showName = true਍紀⤀ 㴀㸀 笀ഀഀ
  const { currentLanguage, changeLanguage } = useLanguage();਍ഀഀ
  // ESPAÑOL PRIMERO en la lista਍  挀漀渀猀琀 氀愀渀最甀愀最攀猀 㴀 嬀ഀഀ
    { code: 'es', name: 'Español', flag: '🇨🇴' },਍    笀 挀漀搀攀㨀 ✀攀渀✀Ⰰ 渀愀洀攀㨀 ✀䔀渀最氀椀猀栀✀Ⰰ 昀氀愀最㨀 ✀㰀齃㳝⟝ 紀ഀഀ
  ];਍ഀഀ
  const handleLanguageChange = (languageCode: string) => {਍    挀栀愀渀最攀䰀愀渀最甀愀最攀⠀氀愀渀最甀愀最攀䌀漀搀攀⤀㬀ഀഀ
  };਍ഀഀ
  return (਍    㰀搀椀瘀 挀氀愀猀猀一愀洀攀㴀笀挀渀⠀✀氀愀渀最甀愀最攀ⴀ猀攀氀攀挀琀漀爀✀Ⰰ 挀氀愀猀猀一愀洀攀⤀紀㸀ഀഀ
      {languages.map((language) => (਍        㰀戀甀琀琀漀渀ഀഀ
          key={language.code}਍          漀渀䌀氀椀挀欀㴀笀⠀⤀ 㴀㸀 栀愀渀搀氀攀䰀愀渀最甀愀最攀䌀栀愀渀最攀⠀氀愀渀最甀愀最攀⸀挀漀搀攀⤀紀ഀഀ
          className={cn(਍            ✀氀愀渀最甀愀最攀ⴀ漀瀀琀椀漀渀✀Ⰰഀഀ
            'flex items-center gap-2 px-3 py-2 rounded-md',਍            ✀琀爀愀渀猀椀琀椀漀渀ⴀ挀漀氀漀爀猀 栀漀瘀攀爀㨀戀最ⴀ最爀愀礀ⴀ㄀　　 搀愀爀欀㨀栀漀瘀攀爀㨀戀最ⴀ最爀愀礀ⴀ㠀　　✀Ⰰഀഀ
            currentLanguage === language.code && 'bg-blue-100 dark:bg-blue-900'਍          ⤀紀ഀഀ
          aria-label={`Cambiar a ${language.name}`}਍        㸀ഀഀ
          {showFlag && <span className="text-lg">{language.flag}</span>}਍          笀猀栀漀眀一愀洀攀 ☀☀ 㰀猀瀀愀渀㸀笀氀愀渀最甀愀最攀⸀渀愀洀攀紀㰀⼀猀瀀愀渀㸀紀ഀഀ
        </button>਍      ⤀⤀紀ഀഀ
    </div>਍  ⤀㬀ഀഀ
};਍怀怀怀ഀഀ
਍⌀⌀⌀ ⨀⨀㈀⸀ 匀攀氀攀挀琀漀爀 搀攀 䴀漀渀攀搀愀⨀⨀ഀഀ
```typescript਍⼀⼀ 䌀漀洀瀀漀渀攀渀琀攀 瀀愀爀愀 挀愀洀戀椀愀爀 洀漀渀攀搀愀ഀഀ
export const CurrencySelector: React.FC<CurrencySelectorProps> = ({਍  挀氀愀猀猀一愀洀攀Ⰰഀഀ
  showSymbol = true,਍  猀栀漀眀一愀洀攀 㴀 琀爀甀攀ഀഀ
}) => {਍  挀漀渀猀琀 笀 攀昀昀攀挀琀椀瘀攀䌀漀渀昀椀最甀爀愀琀椀漀渀Ⰰ 甀瀀搀愀琀攀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀 紀 㴀 甀猀攀䐀甀愀氀䌀漀渀昀椀最甀爀愀琀椀漀渀⠀⤀㬀ഀഀ
  const currentCurrency = effectiveConfiguration?.currency || 'COP';਍ഀഀ
  const currencies = [਍    笀 挀漀搀攀㨀 ✀䌀伀倀✀Ⰰ 渀愀洀攀㨀 ✀倀攀猀漀 䌀漀氀漀洀戀椀愀渀漀✀Ⰰ 猀礀洀戀漀氀㨀 ✀␀✀Ⰰ 昀氀愀最㨀 ✀㰀㳝⟝ 紀Ⰰഀഀ
    { code: 'USD', name: 'Dólar Americano', symbol: '$', flag: '🇺🇸' },਍    笀 挀漀搀攀㨀 ✀䔀唀刀✀Ⰰ 渀愀洀攀㨀 ✀䔀甀爀漀✀Ⰰ 猀礀洀戀漀氀㨀 ✀가✠Ⰰ 昀氀愀最㨀 ✀㰀㳝齃⟝ 紀ഀഀ
  ];਍ഀഀ
  const handleCurrencyChange = async (currencyCode: string) => {਍    愀眀愀椀琀 甀瀀搀愀琀攀唀猀攀爀倀爀攀昀攀爀攀渀挀攀猀⠀笀 挀甀爀爀攀渀挀礀㨀 挀甀爀爀攀渀挀礀䌀漀搀攀 愀猀 ✀䌀伀倀✀ 簀 ✀唀匀䐀✀ 簀 ✀䔀唀刀✀ 紀⤀㬀ഀഀ
  };਍ഀഀ
  return (਍    㰀搀椀瘀 挀氀愀猀猀一愀洀攀㴀笀挀渀⠀✀挀甀爀爀攀渀挀礀ⴀ猀攀氀攀挀琀漀爀✀Ⰰ 挀氀愀猀猀一愀洀攀⤀紀㸀ഀഀ
      {currencies.map((currency) => (਍        㰀戀甀琀琀漀渀ഀഀ
          key={currency.code}਍          漀渀䌀氀椀挀欀㴀笀⠀⤀ 㴀㸀 栀愀渀搀氀攀䌀甀爀爀攀渀挀礀䌀栀愀渀最攀⠀挀甀爀爀攀渀挀礀⸀挀漀搀攀⤀紀ഀഀ
          className={cn(਍            ✀挀甀爀爀攀渀挀礀ⴀ漀瀀琀椀漀渀✀Ⰰഀഀ
            'flex items-center gap-2 px-3 py-2 rounded-md',਍            ✀琀爀愀渀猀椀琀椀漀渀ⴀ挀漀氀漀爀猀 栀漀瘀攀爀㨀戀最ⴀ最爀愀礀ⴀ㄀　　 搀愀爀欀㨀栀漀瘀攀爀㨀戀最ⴀ最爀愀礀ⴀ㠀　　✀Ⰰഀഀ
            currentCurrency === currency.code && 'bg-green-100 dark:bg-green-900'਍          ⤀紀ഀഀ
          aria-label={`Cambiar a ${currency.name}`}਍        㸀ഀഀ
          {showSymbol && <span className="text-lg">{currency.flag}</span>}਍          笀猀栀漀眀一愀洀攀 ☀☀ 㰀猀瀀愀渀㸀笀挀甀爀爀攀渀挀礀⸀挀漀搀攀紀㰀⼀猀瀀愀渀㸀紀ഀഀ
        </button>਍      ⤀⤀紀ഀഀ
    </div>਍  ⤀㬀ഀഀ
};਍怀怀怀ഀഀ
਍⌀⌀⌀ ⨀⨀㌀⸀ 䌀漀渀昀椀最甀爀愀搀漀爀 搀攀 吀攀洀愀 䔀洀瀀爀攀猀愀爀椀愀氀⨀⨀ഀഀ
```typescript਍⼀⼀ 䌀漀洀瀀漀渀攀渀琀攀 瀀愀爀愀 挀漀渀昀椀最甀爀愀爀 琀攀洀愀 攀洀瀀爀攀猀愀爀椀愀氀 ⠀猀漀氀漀 愀搀洀椀渀⤀ഀഀ
export const CompanyThemeConfigurator: React.FC = () => {਍  挀漀渀猀琀 笀 挀漀洀瀀愀渀礀匀攀琀琀椀渀最猀Ⰰ 甀瀀搀愀琀攀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀 紀 㴀 甀猀攀䐀甀愀氀䌀漀渀昀椀最甀爀愀琀椀漀渀⠀⤀㬀ഀഀ
  const { user } = useAuth();਍ഀഀ
  // Solo administradores pueden configurar tema empresarial਍  椀昀 ⠀甀猀攀爀㼀⸀爀漀氀攀 ℀㴀㴀 ✀䄀䐀䴀䤀一✀⤀ 笀ഀഀ
    return <div>Acceso restringido a administradores</div>;਍  紀ഀഀ
਍  挀漀渀猀琀 栀愀渀搀氀攀吀栀攀洀攀唀瀀搀愀琀攀 㴀 愀猀礀渀挀 ⠀琀栀攀洀攀㨀 倀愀爀琀椀愀氀㰀䌀漀洀瀀愀渀礀吀栀攀洀攀㸀⤀ 㴀㸀 笀ഀഀ
    await updateCompanySettings({਍      戀爀愀渀搀匀攀琀琀椀渀最猀㨀 笀ഀഀ
        ...companySettings?.brandSettings,਍        ⸀⸀⸀琀栀攀洀攀ഀഀ
      }਍    紀⤀㬀ഀഀ
  };਍ഀഀ
  return (਍    㰀搀椀瘀 挀氀愀猀猀一愀洀攀㴀∀挀漀洀瀀愀渀礀ⴀ琀栀攀洀攀ⴀ挀漀渀昀椀最甀爀愀琀漀爀∀㸀ഀഀ
      <h3>Configuración de Tema Empresarial</h3>਍      ഀഀ
      <div className="color-picker">਍        㰀氀愀戀攀氀㸀䌀漀氀漀爀 倀爀椀渀挀椀瀀愀氀㰀⼀氀愀戀攀氀㸀ഀഀ
        <input਍          琀礀瀀攀㴀∀挀漀氀漀爀∀ഀഀ
          value={companySettings?.brandSettings.primaryColor}਍          漀渀䌀栀愀渀最攀㴀笀⠀攀⤀ 㴀㸀 栀愀渀搀氀攀吀栀攀洀攀唀瀀搀愀琀攀⠀笀 瀀爀椀洀愀爀礀䌀漀氀漀爀㨀 攀⸀琀愀爀最攀琀⸀瘀愀氀甀攀 紀⤀紀ഀഀ
        />਍      㰀⼀搀椀瘀㸀ഀഀ
      ਍      㰀搀椀瘀 挀氀愀猀猀一愀洀攀㴀∀氀漀最漀ⴀ甀瀀氀漀愀搀∀㸀ഀഀ
        <label>Logo de la Empresa</label>਍        㰀椀渀瀀甀琀ഀഀ
          type="file"਍          愀挀挀攀瀀琀㴀∀椀洀愀最攀⼀⨀∀ഀഀ
          onChange={(e) => {਍            ⼀⼀ 䰀最椀挀愀 瀀愀爀愀 猀甀戀椀爀 氀漀最漀ഀഀ
          }}਍        ⼀㸀ഀഀ
      </div>਍      ഀഀ
      <div className="slogan-input">਍        㰀氀愀戀攀氀㸀䰀攀洀愀 搀攀 氀愀 䔀洀瀀爀攀猀愀㰀⼀氀愀戀攀氀㸀ഀഀ
        <input਍          琀礀瀀攀㴀∀琀攀砀琀∀ഀഀ
          value={companySettings?.brandSettings.slogan}਍          漀渀䌀栀愀渀最攀㴀笀⠀攀⤀ 㴀㸀 栀愀渀搀氀攀吀栀攀洀攀唀瀀搀愀琀攀⠀笀 猀氀漀最愀渀㨀 攀⸀琀愀爀最攀琀⸀瘀愀氀甀攀 紀⤀紀ഀഀ
          placeholder="Ingrese el lema de la empresa"਍        ⼀㸀ഀഀ
      </div>਍    㰀⼀搀椀瘀㸀ഀഀ
  );਍紀㬀ഀഀ
```਍ഀഀ
---਍ഀഀ
## 📊 **Base de Datos**਍ഀഀ
### **1. Tabla de Configuración Empresarial**਍怀怀怀猀焀氀ഀഀ
-- Configuración de empresa਍䌀刀䔀䄀吀䔀 吀䄀䈀䰀䔀 挀漀洀瀀愀渀礀开猀攀琀琀椀渀最猀 ⠀ഀഀ
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),਍  挀漀洀瀀愀渀礀开椀搀 唀唀䤀䐀 刀䔀䘀䔀刀䔀一䌀䔀匀 挀漀洀瀀愀渀椀攀猀⠀椀搀⤀ 伀一 䐀䔀䰀䔀吀䔀 䌀䄀匀䌀䄀䐀䔀Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 爀攀最椀漀渀愀氀ഀഀ
  default_language VARCHAR(2) DEFAULT 'es',਍  搀攀昀愀甀氀琀开挀甀爀爀攀渀挀礀 嘀䄀刀䌀䠀䄀刀⠀㌀⤀ 䐀䔀䘀䄀唀䰀吀 ✀䌀伀倀✀Ⰰഀഀ
  country VARCHAR(2) DEFAULT 'CO',਍  琀椀洀攀稀漀渀攀 嘀䄀刀䌀䠀䄀刀⠀㔀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀䄀洀攀爀椀挀愀⼀䈀漀最漀琀愀✀Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 洀愀爀挀愀ഀഀ
  logo_url TEXT,਍  猀氀漀最愀渀 吀䔀堀吀Ⰰഀഀ
  primary_color VARCHAR(7) DEFAULT '#2563eb',਍  猀攀挀漀渀搀愀爀礀开挀漀氀漀爀 嘀䄀刀䌀䠀䄀刀⠀㜀⤀ 䐀䔀䘀䄀唀䰀吀 ✀⌀㄀攀㐀　愀昀✀Ⰰഀഀ
  font_family VARCHAR(100) DEFAULT 'Inter',਍  ഀഀ
  -- Configuración de facturación਍  戀椀氀氀椀渀最开挀甀爀爀攀渀挀礀 嘀䄀刀䌀䠀䄀刀⠀㌀⤀ 䐀䔀䘀䄀唀䰀吀 ✀䌀伀倀✀Ⰰഀഀ
  tax_rate DECIMAL(5,4) DEFAULT 0.19,਍  琀愀砀开椀搀 嘀䄀刀䌀䠀䄀刀⠀㔀　⤀Ⰰഀഀ
  invoice_prefix VARCHAR(10) DEFAULT 'INV',਍  瀀愀礀洀攀渀琀开琀攀爀洀猀 䤀一吀䔀䜀䔀刀 䐀䔀䘀䄀唀䰀吀 ㌀　Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 猀漀瀀漀爀琀攀ഀഀ
  support_email VARCHAR(255),਍  猀甀瀀瀀漀爀琀开瀀栀漀渀攀 嘀䄀刀䌀䠀䄀刀⠀㈀　⤀Ⰰഀഀ
  business_hours JSONB,਍  ഀഀ
  -- Configuración de usuarios਍  愀氀氀漀眀开瀀攀爀猀漀渀愀氀开琀栀攀洀攀猀 䈀伀伀䰀䔀䄀一 䐀䔀䘀䄀唀䰀吀 琀爀甀攀Ⰰഀഀ
  allow_personal_avatars BOOLEAN DEFAULT true,਍  搀攀昀愀甀氀琀开甀猀攀爀开爀漀氀攀 嘀䄀刀䌀䠀䄀刀⠀㈀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀䔀䴀倀䰀伀夀䔀䔀✀Ⰰഀഀ
  max_users INTEGER DEFAULT 100,਍  ഀഀ
  created_at TIMESTAMP DEFAULT NOW(),਍  甀瀀搀愀琀攀搀开愀琀 吀䤀䴀䔀匀吀䄀䴀倀 䐀䔀䘀䄀唀䰀吀 一伀圀⠀⤀ഀഀ
);਍ഀഀ
-- Índices਍䌀刀䔀䄀吀䔀 䤀一䐀䔀堀 椀搀砀开挀漀洀瀀愀渀礀开猀攀琀琀椀渀最猀开挀漀洀瀀愀渀礀开椀搀 伀一 挀漀洀瀀愀渀礀开猀攀琀琀椀渀最猀⠀挀漀洀瀀愀渀礀开椀搀⤀㬀ഀഀ
```਍ഀഀ
### **2. Tabla de Preferencias de Usuario**਍怀怀怀猀焀氀ഀഀ
-- Preferencias personales del usuario਍䌀刀䔀䄀吀䔀 吀䄀䈀䰀䔀 甀猀攀爀开瀀爀攀昀攀爀攀渀挀攀猀 ⠀ഀഀ
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),਍  甀猀攀爀开椀搀 唀唀䤀䐀 刀䔀䘀䔀刀䔀一䌀䔀匀 甀猀攀爀猀⠀椀搀⤀ 伀一 䐀䔀䰀䔀吀䔀 䌀䄀匀䌀䄀䐀䔀Ⰰഀഀ
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE,਍  ഀഀ
  -- Configuración de idioma y región਍  氀愀渀最甀愀最攀 嘀䄀刀䌀䠀䄀刀⠀㈀⤀ 䐀䔀䘀䄀唀䰀吀 ✀攀猀✀Ⰰഀഀ
  currency VARCHAR(3) DEFAULT 'COP',਍  琀椀洀攀稀漀渀攀 嘀䄀刀䌀䠀䄀刀⠀㔀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀䄀洀攀爀椀挀愀⼀䈀漀最漀琀愀✀Ⰰഀഀ
  date_format VARCHAR(20) DEFAULT 'DD/MM/YYYY',਍  琀椀洀攀开昀漀爀洀愀琀 嘀䄀刀䌀䠀䄀刀⠀㄀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀㈀㐀栀✀Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 琀攀洀愀ഀഀ
  theme_mode VARCHAR(10) DEFAULT 'auto',਍  瀀爀椀洀愀爀礀开挀漀氀漀爀 嘀䄀刀䌀䠀䄀刀⠀㜀⤀Ⰰഀഀ
  accent_color VARCHAR(7),਍  昀漀渀琀开猀椀稀攀 嘀䄀刀䌀䠀䄀刀⠀㄀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀洀攀搀椀甀洀✀Ⰰഀഀ
  compact_mode BOOLEAN DEFAULT false,਍  ഀഀ
  -- Configuración de perfil਍  愀瘀愀琀愀爀开甀爀氀 吀䔀堀吀Ⰰഀഀ
  nickname VARCHAR(50),਍  搀椀猀瀀氀愀礀开渀愀洀攀 嘀䄀刀䌀䠀䄀刀⠀㄀　　⤀Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 渀漀琀椀昀椀挀愀挀椀漀渀攀猀ഀഀ
  email_notifications BOOLEAN DEFAULT true,਍  瀀甀猀栀开渀漀琀椀昀椀挀愀琀椀漀渀猀 䈀伀伀䰀䔀䄀一 䐀䔀䘀䄀唀䰀吀 琀爀甀攀Ⰰഀഀ
  sms_notifications BOOLEAN DEFAULT false,਍  渀漀琀椀昀椀挀愀琀椀漀渀开昀爀攀焀甀攀渀挀礀 嘀䄀刀䌀䠀䄀刀⠀㈀　⤀ 䐀䔀䘀䄀唀䰀吀 ✀椀洀洀攀搀椀愀琀攀✀Ⰰഀഀ
  ਍  ⴀⴀ 䌀漀渀昀椀最甀爀愀挀椀渀 搀攀 瀀爀椀瘀愀挀椀搀愀搀ഀഀ
  profile_visibility VARCHAR(20) DEFAULT 'company',਍  愀挀琀椀瘀椀琀礀开猀栀愀爀椀渀最 䈀伀伀䰀䔀䄀一 䐀䔀䘀䄀唀䰀吀 琀爀甀攀Ⰰഀഀ
  data_analytics BOOLEAN DEFAULT true,਍  ഀഀ
  -- Configuración de accesibilidad਍  栀椀最栀开挀漀渀琀爀愀猀琀 䈀伀伀䰀䔀䄀一 䐀䔀䘀䄀唀䰀吀 昀愀氀猀攀Ⰰഀഀ
  screen_reader BOOLEAN DEFAULT false,਍  欀攀礀戀漀愀爀搀开渀愀瘀椀最愀琀椀漀渀 䈀伀伀䰀䔀䄀一 䐀䔀䘀䄀唀䰀吀 昀愀氀猀攀Ⰰഀഀ
  reduced_motion BOOLEAN DEFAULT false,਍  ഀഀ
  created_at TIMESTAMP DEFAULT NOW(),਍  甀瀀搀愀琀攀搀开愀琀 吀䤀䴀䔀匀吀䄀䴀倀 䐀䔀䘀䄀唀䰀吀 一伀圀⠀⤀ഀഀ
);਍ഀഀ
-- Índices਍䌀刀䔀䄀吀䔀 䤀一䐀䔀堀 椀搀砀开甀猀攀爀开瀀爀攀昀攀爀攀渀挀攀猀开甀猀攀爀开椀搀 伀一 甀猀攀爀开瀀爀攀昀攀爀攀渀挀攀猀⠀甀猀攀爀开椀搀⤀㬀ഀഀ
CREATE INDEX idx_user_preferences_company_id ON user_preferences(company_id);਍怀怀怀ഀഀ
਍ⴀⴀⴀഀഀ
਍⌀⌀ 㸀⃝⨀⨀吀攀猀琀椀渀最⨀⨀ഀഀ
਍⌀⌀⌀ ⨀⨀㄀⸀ 吀攀猀琀椀渀最 搀攀 䌀漀渀昀椀最甀爀愀挀椀渀 䐀甀愀氀⨀⨀ഀഀ
```typescript਍⼀⼀ 吀攀猀琀 搀攀 挀漀渀昀椀最甀爀愀挀椀渀 攀洀瀀爀攀猀愀⼀甀猀甀愀爀椀漀ഀഀ
describe('Dual Configuration', () => {਍  椀琀⠀✀甀猀愀 挀漀渀昀椀最甀爀愀挀椀渀 搀攀 攀洀瀀爀攀猀愀 瀀漀爀 搀攀昀攀挀琀漀✀Ⰰ ⠀⤀ 㴀㸀 笀ഀഀ
    const companySettings = {਍      搀攀昀愀甀氀琀䰀愀渀最甀愀最攀㨀 ✀攀猀✀Ⰰഀഀ
      defaultCurrency: 'COP',਍      戀爀愀渀搀匀攀琀琀椀渀最猀㨀 笀ഀഀ
        primaryColor: '#2563eb'਍      紀ഀഀ
    };਍    ഀഀ
    const userPreferences = null;਍    ഀഀ
    const effective = getEffectiveConfiguration(companySettings, userPreferences);਍    ഀഀ
    expect(effective.language).toBe('es');਍    攀砀瀀攀挀琀⠀攀昀昀攀挀琀椀瘀攀⸀挀甀爀爀攀渀挀礀⤀⸀琀漀䈀攀⠀✀䌀伀倀✀⤀㬀ഀഀ
    expect(effective.theme.primaryColor).toBe('#2563eb');਍  紀⤀㬀ഀഀ
਍  椀琀⠀✀甀猀甀愀爀椀漀 猀漀戀爀攀猀挀爀椀戀攀 挀漀渀昀椀最甀爀愀挀椀渀 搀攀 攀洀瀀爀攀猀愀✀Ⰰ ⠀⤀ 㴀㸀 笀ഀഀ
    const companySettings = {਍      搀攀昀愀甀氀琀䰀愀渀最甀愀最攀㨀 ✀攀猀✀Ⰰഀഀ
      defaultCurrency: 'COP'਍    紀㬀ഀഀ
    ਍    挀漀渀猀琀 甀猀攀爀倀爀攀昀攀爀攀渀挀攀猀 㴀 笀ഀഀ
      language: 'en',਍      挀甀爀爀攀渀挀礀㨀 ✀唀匀䐀✀ഀഀ
    };਍    ഀഀ
    const effective = getEffectiveConfiguration(companySettings, userPreferences);਍    ഀഀ
    expect(effective.language).toBe('en');਍    攀砀瀀攀挀琀⠀攀昀昀攀挀琀椀瘀攀⸀挀甀爀爀攀渀挀礀⤀⸀琀漀䈀攀⠀✀唀匀䐀✀⤀㬀ഀഀ
  });਍ഀഀ
  it('solo admin puede cambiar configuración de empresa', () => {਍    挀漀渀猀琀 愀搀洀椀渀唀猀攀爀 㴀 笀 爀漀氀攀㨀 ✀䄀䐀䴀䤀一✀ 紀㬀ഀഀ
    const regularUser = { role: 'EMPLOYEE' };਍    ഀഀ
    expect(canUpdateCompanySettings(adminUser)).toBe(true);਍    攀砀瀀攀挀琀⠀挀愀渀唀瀀搀愀琀攀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⠀爀攀最甀氀愀爀唀猀攀爀⤀⤀⸀琀漀䈀攀⠀昀愀氀猀攀⤀㬀ഀഀ
  });਍紀⤀㬀ഀഀ
```਍ഀഀ
---਍ഀഀ
## 📚 **Documentación para Desarrolladores**਍ഀഀ
### **1. Implementación de Configuración Dual**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// Ejemplo de uso en componentes਍攀砀瀀漀爀琀 挀漀渀猀琀 䴀礀䌀漀洀瀀漀渀攀渀琀㨀 刀攀愀挀琀⸀䘀䌀 㴀 ⠀⤀ 㴀㸀 笀ഀഀ
  const { effectiveConfiguration } = useDualConfiguration();਍  挀漀渀猀琀 笀 昀漀爀洀愀琀䌀甀爀爀攀渀挀礀 紀 㴀 甀猀攀䌀甀爀爀攀渀挀礀䘀漀爀洀愀琀琀攀爀⠀⤀㬀ഀഀ
  ਍  ⼀⼀ 唀猀愀爀 挀漀渀昀椀最甀爀愀挀椀渀 攀昀攀挀琀椀瘀愀ഀഀ
  const price = formatCurrency(99000, effectiveConfiguration?.currency);਍  ഀഀ
  return (਍    㰀搀椀瘀㸀ഀഀ
      <h1>Precio: {price}</h1>਍      㰀瀀㸀䤀搀椀漀洀愀㨀 笀攀昀昀攀挀琀椀瘀攀䌀漀渀昀椀最甀爀愀琀椀漀渀㼀⸀氀愀渀最甀愀最攀紀㰀⼀瀀㸀ഀഀ
    </div>਍  ⤀㬀ഀഀ
};਍怀怀怀ഀഀ
਍⌀⌀⌀ ⨀⨀㈀⸀ 䴀椀最爀愀挀椀渀 搀攀 䌀漀渀昀椀最甀爀愀挀椀渀⨀⨀ഀഀ
```typescript਍⼀⼀ 匀挀爀椀瀀琀 搀攀 洀椀最爀愀挀椀渀 瀀愀爀愀 挀漀渀昀椀最甀爀愀挀椀渀 攀砀椀猀琀攀渀琀攀ഀഀ
export const migrateToDualConfiguration = async () => {਍  ⼀⼀ ㄀⸀ 䌀爀攀愀爀 挀漀渀昀椀最甀爀愀挀椀渀 搀攀 攀洀瀀爀攀猀愀 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
  const companies = await fetchAllCompanies();਍  ഀഀ
  for (const company of companies) {਍    愀眀愀椀琀 挀爀攀愀琀攀䌀漀洀瀀愀渀礀匀攀琀琀椀渀最猀⠀笀ഀഀ
      companyId: company.id,਍      搀攀昀愀甀氀琀䰀愀渀最甀愀最攀㨀 ✀攀猀✀Ⰰഀഀ
      defaultCurrency: 'COP',਍      挀漀甀渀琀爀礀㨀 ✀䌀伀✀Ⰰഀഀ
      timezone: 'America/Bogota'਍    紀⤀㬀ഀഀ
  }਍  ഀഀ
  // 2. Crear preferencias de usuario por defecto਍  挀漀渀猀琀 甀猀攀爀猀 㴀 愀眀愀椀琀 昀攀琀挀栀䄀氀氀唀猀攀爀猀⠀⤀㬀ഀഀ
  ਍  昀漀爀 ⠀挀漀渀猀琀 甀猀攀爀 漀昀 甀猀攀爀猀⤀ 笀ഀഀ
    await createUserPreferences({਍      甀猀攀爀䤀搀㨀 甀猀攀爀⸀椀搀Ⰰഀഀ
      companyId: user.companyId,਍      氀愀渀最甀愀最攀㨀 ✀攀猀✀Ⰰഀഀ
      currency: 'COP',਍      琀栀攀洀攀䴀漀搀攀㨀 ✀愀甀琀漀✀ഀഀ
    });਍  紀ഀഀ
};਍怀怀怀ഀഀ
਍ⴀⴀⴀഀഀ
਍⌀⌀ 㴀꣘⃞⨀⨀刀䔀䜀䰀䄀匀 䐀䔀 䤀䴀倀䰀䔀䴀䔀一吀䄀䌀䤀팀一 伀䈀䰀䤀䜀䄀吀伀刀䤀䄀匀⨀⨀ഀഀ
਍⌀⌀⌀ ⨀⨀㄀⸀ 䌀漀渀昀椀最甀爀愀挀椀渀 䤀渀椀挀椀愀氀⨀⨀ഀഀ
```typescript਍⼀⼀ 匀䤀䔀䴀倀刀䔀 挀漀渀昀椀最甀爀愀爀 攀猀瀀愀漀氀 礀 䌀伀倀 瀀漀爀 搀攀昀攀挀琀漀ഀഀ
const defaultConfiguration = {਍  氀愀渀最甀愀最攀㨀 ✀攀猀✀Ⰰഀഀ
  currency: 'COP',਍  挀漀甀渀琀爀礀㨀 ✀䌀伀✀Ⰰഀഀ
  timezone: 'America/Bogota',਍  搀愀琀攀䘀漀爀洀愀琀㨀 ✀䐀䐀⼀䴀䴀⼀夀夀夀夀✀Ⰰഀഀ
  timeFormat: '24h'਍紀㬀ഀഀ
```਍ഀഀ
### **2. Jerarquía de Configuración**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// 1. Usuario personal (máxima prioridad)਍⼀⼀ ㈀⸀ 䔀洀瀀爀攀猀愀 ⠀瀀爀椀漀爀椀搀愀搀 洀攀搀椀愀⤀ഀഀ
// 3. Sistema (prioridad mínima)਍挀漀渀猀琀 最攀琀䔀昀昀攀挀琀椀瘀攀嘀愀氀甀攀 㴀 ⠀甀猀攀爀嘀愀氀甀攀㨀 愀渀礀Ⰰ 挀漀洀瀀愀渀礀嘀愀氀甀攀㨀 愀渀礀Ⰰ 猀礀猀琀攀洀嘀愀氀甀攀㨀 愀渀礀⤀ 㴀㸀 笀ഀഀ
  return userValue || companyValue || systemValue;਍紀㬀ഀഀ
```਍ഀഀ
### **3. Validación de Permisos**਍怀怀怀琀礀瀀攀猀挀爀椀瀀琀ഀഀ
// Validar permisos para cambios de configuración਍攀砀瀀漀爀琀 挀漀渀猀琀 瘀愀氀椀搀愀琀攀䌀漀渀昀椀最甀爀愀琀椀漀渀倀攀爀洀椀猀猀椀漀渀猀 㴀 ⠀甀猀攀爀㨀 唀猀攀爀Ⰰ 愀挀琀椀漀渀㨀 猀琀爀椀渀最⤀ 㴀㸀 笀ഀഀ
  switch (action) {਍    挀愀猀攀 ✀甀瀀搀愀琀攀开挀漀洀瀀愀渀礀开猀攀琀琀椀渀最猀✀㨀ഀഀ
      return user.role === 'ADMIN' || user.role === 'OWNER';਍    挀愀猀攀 ✀甀瀀搀愀琀攀开甀猀攀爀开瀀爀攀昀攀爀攀渀挀攀猀✀㨀ഀഀ
      return true; // Todos pueden cambiar sus preferencias਍    搀攀昀愀甀氀琀㨀ഀഀ
      return false;਍  紀ഀഀ
};਍怀怀怀ഀഀ
਍ⴀⴀⴀഀഀ
਍⨀⨀�氀琀椀洀愀 愀挀琀甀愀氀椀稀愀挀椀渀⨀⨀㨀 ㈀　㈀㔀ⴀ　㄀ⴀ㈀　  ഀഀ
**Versión**: 3.0 - Configuración dual empresa/usuario  ਍⨀⨀刀攀猀瀀漀渀猀愀戀氀攀⨀⨀㨀 䔀焀甀椀瀀漀 搀攀 䐀攀猀愀爀爀漀氀氀漀ഀഀ
